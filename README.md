This branch of Enzo-E is my functioning version that is up to date with the main branch of the original Enzo-E repository. I am developing this script to produce the bondi accretion initial problem. My plan right now is to use the IsolatedGalaxy problem as a starting point rather than the depreciated Collapse problem as a starting point. It seems that the current main branch does not even run the Collapse test problem anymore, I think.

That being said, I will use this readme file as a written log of my progress so that I do not get confused with the various versions of Enzo-E I have built on PACE.

Jan 13, 2022: I was able to get git integrated on PACE and use it to clone the current main branch of Enzo-E as well as make various branches on my own fork. I have the main branch setup as the unbuilt version of the up to date original repository branch. The built branch does not seem to be important at this point given that I have the uptodate branch. I might delete it at some point. The uptodate branch is able to run the IsolatedGalaxy problem so that I what I plan to use as the base template for the Bondi accretion problem. This should be better than the Collapse problem because 1) it runs on the branch and 2) it already has the integration of particles and gas built into the problem.

Jan 21, 2022: Found that the error I was having was the code throwing an error due to there not being a file to read circulation velocity from. This was fixed by leaving the analytic velocity flag on, which does not effect the rest of the simulation. I also realized that I do not need to worry with the disk or halo information since I can just set the background gas through the field group. However, still need to specific the gas temperature in the parameters since it is needed to define the energy. That being said, the gas setup is basically working, however the main issue now is making sure that the units are working out. I seem to be need to do some preconditioning of the density I give to the field so that it results in the right value given the units I set in the simulation. Once I get that sorted out, I will read in the single dark matter particle from the data file and use that as the black hole. Then I will need to figure out the gravity solver. John suggested that we should stick with the dd sovler we were using rather than the background_acceleration method.

Jan 27, 2022: I have been able to have the background field be set to a constant value. I made sure to check with Danielle that the plaid pattern on the yt plot was okay. It is not saving the data as gas in the hd5f file, but I think is fine? I have also been able to get the particle file to be read into the simulation, although I need to check to make sure that there is only one dark matter particle present. The main issue now is trying to figure out the solver to use. I know that we had decided to use the DD solver from before, but there seems to be an issue when trying to get it to run. I am not sure if it is because there is some dependency on the fluxcorrect problem. I do not think the background acceleration method would work either unless I modified the Pointmass type. Hopefully John might have some insight on what is going weird with the dd method.

Jan 28, 2022: Met with John and Kwangho today and found out that the isolated galaxy problem with particles does not work. For the time being, I am going to use the isolated galaxy without particles. The black hole will be set by the PointMass type of the background acceleration method. This will setup the static potential acting on the gas. I was also able to get VS code to work on my account on HIVE, the issue was that I did not have enough space like I had assumed. I had to move the local distribution of anaconda to the data directory. I will need to update the path for enzo-e to reflect this move before testing more simulations. Also, stay on hive since it does not cost computer time for John. So I need to update the anaconda path and then setup the PointMass type background acceleration method to test. Should be much easier now with the VS code interface. Also, you can have the .cpp files print to the out_log with a normal print statement in the problem file.

Feb 4, 2022: Well I tried to make a quick fix out of having to move the local anaconda2 distribution from the home directory to the data directory. After struggling all day I have finally gotten my hive account back to a functioanl state for both yt and enzoe. I can load data with yt and I was able to build enzoe with the new hdf5 path included. I am know using the modules that are built into pace. So when I log into hive, I have the new additional step of having to activate my conda environment since the module is loaded in through the bashrc script. So make sure to run "conda activate bday7" whenever sshing into pace (both terminal as well as xquartz for plots). I have found that the PointMass did not seem to change the background potential. I need to take a closer look at the problem file to make sure that the pointmass type of the background acceleration method is indeed functional.
